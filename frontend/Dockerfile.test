FROM mcr.microsoft.com/playwright:v1.57.0-jammy

WORKDIR /app

# 1. Install dependencies (Cached Layer)
COPY package*.json ./
RUN npm install

# 2. Browsers are pre-installed in the base image (v1.57 matches package.json)
# We can safely skip 'npx playwright install'

# 3. Copy source code (Frequent changes layer)
COPY . .

# 4. Default command
CMD ["npx", "playwright", "test"]
