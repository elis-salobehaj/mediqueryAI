FROM mcr.microsoft.com/playwright:v1.50.0-jammy

WORKDIR /app

# 1. Install dependencies (Cached Layer)
COPY package*.json ./
RUN npm install

# 2. Browsers are pre-installed in the base image (v1.50 matches package.json)
# We skip 'npx playwright install' to save time & bandwidth!

# 3. Copy source code (Frequent changes layer)
COPY . .

# 4. Default command
CMD ["npm", "run", "test-ct"]
